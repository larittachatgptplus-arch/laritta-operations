<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laritta Operations System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <style>
    .gradient-red { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); }
    .gradient-white { background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); }
  </style>
</head>
<body class="bg-slate-50">

<div id="root" class="max-w-7xl mx-auto p-4">
  <!-- Header -->
  <div class="gradient-red p-6 rounded-xl shadow-lg mb-6 text-white">
    <div class="flex items-center gap-4">
      <div class="text-5xl">ğŸª</div>
      <div>
        <h1 class="text-3xl font-bold">Laritta Operations System</h1>
        <p class="text-red-100">Marketing Request System - 41 Outlet & 6 Departemen</p>
      </div>
    </div>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-5 rounded-xl shadow-sm border-2 border-slate-200">
      <div class="text-xs text-slate-500 font-bold uppercase">Total</div>
      <div id="stat-total" class="text-3xl font-bold text-slate-800">0</div>
    </div>
    <div class="bg-yellow-50 p-5 rounded-xl border-2 border-yellow-300">
      <div class="text-xs text-yellow-700 font-bold uppercase">Antrian</div>
      <div id="stat-antrian" class="text-3xl font-bold text-yellow-800">0</div>
    </div>
    <div class="bg-blue-50 p-5 rounded-xl border-2 border-blue-300">
      <div class="text-xs text-blue-700 font-bold uppercase">Diproses</div>
      <div id="stat-diproses" class="text-3xl font-bold text-blue-800">0</div>
    </div>
    <div class="bg-green-50 p-5 rounded-xl border-2 border-green-300">
      <div class="text-xs text-green-700 font-bold uppercase">Selesai</div>
      <div id="stat-selesai" class="text-3xl font-bold text-green-800">0</div>
    </div>
  </div>

  <!-- Mode Toggle & Filter -->
  <div class="bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-wrap gap-4 items-center justify-between">
    <div class="flex gap-2">
      <button id="btn-outlet" class="px-6 py-3 rounded-lg font-bold bg-red-600 text-white shadow-lg">
        ğŸª Mode Outlet/Dept
      </button>
      <button id="btn-marketing" class="px-6 py-3 rounded-lg font-bold bg-slate-100 text-slate-600 border-2">
        ğŸ¯ Mode Marketing Pusat
      </button>
    </div>
    
    <div id="filter-container" class="hidden">
      <select id="select-outlet" class="px-4 py-3 border-2 border-red-200 rounded-lg font-medium text-sm bg-white">
        <option value="">Pilih Outlet/Dept Anda...</option>
      </select>
    </div>
  </div>

  <!-- Button Buat Request -->
  <div id="create-btn-container" class="mb-6">
    <button id="btn-create" class="gradient-red hover:opacity-90 text-white px-6 py-3 rounded-xl font-bold shadow-lg">
      â• Buat Request Baru
    </button>
  </div>

  <!-- Requests Container -->
  <div id="requests-container"></div>

  <!-- Status -->
  <div class="text-center py-6 text-sm text-slate-600">
    <p id="status-text">Menghubungkan ke Firebase...</p>
  </div>
</div>

<!-- Modal Form -->
<div id="modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
  <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
    <div class="gradient-red p-6 rounded-t-2xl flex justify-between items-center text-white">
      <h2 class="text-xl font-bold">ğŸ“ Form Request Baru</h2>
      <button id="btn-close-modal" class="text-2xl hover:text-red-200">âœ•</button>
    </div>
    <form id="form-request" class="p-6 space-y-4">
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Nama Pemohon *</label>
        <input type="text" id="input-name" required placeholder="Masukkan nama lengkap" 
          class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500 focus:outline-none" />
      </div>
      
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Kategori Pemohon *</label>
        <select id="select-category" required class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500">
          <option value="">Pilih...</option>
          <option value="outlet">ğŸª Outlet</option>
          <option value="dept">ğŸ¢ Departemen</option>
        </select>
      </div>
      
      <div id="outlet-group" class="hidden">
        <label class="block text-sm font-bold text-slate-700 mb-2">HUB *</label>
        <select id="select-hub" class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500 mb-3">
          <option value="">Pilih HUB...</option>
          <option value="Surabaya Raya">Surabaya Raya (33 Outlet)</option>
          <option value="Tangerang">Tangerang (8 Outlet)</option>
        </select>
        <label class="block text-sm font-bold text-slate-700 mb-2">Outlet *</label>
        <select id="select-outlet-form" class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500">
          <option value="">Pilih outlet...</option>
        </select>
      </div>
      
      <div id="dept-group" class="hidden">
        <label class="block text-sm font-bold text-slate-700 mb-2">Departemen *</label>
        <select id="select-dept" class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500">
          <option value="">Pilih departemen...</option>
          <option value="IT">IT</option>
          <option value="HRD">HRD</option>
          <option value="Finance Accounting">Finance Accounting</option>
          <option value="Procurement">Procurement</option>
          <option value="Logistik">Logistik</option>
          <option value="Sales Mobile">Sales Mobile</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Jenis Request *</label>
        <select id="select-type" required class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500">
          <option value="cetak">ğŸ–¨ï¸ Cetak Banner/Menu</option>
          <option value="speaker">ğŸ“¢ Speaker/Sound System</option>
          <option value="event">ğŸ“… Event Offline</option>
          <option value="digital">ğŸ“± Konten Digital/Social Media</option>
          <option value="lainnya">ğŸ“¦ Lainnya</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Judul Request *</label>
        <input type="text" id="input-title" required placeholder="Contoh: Banner Promo Tahun Baru" 
          class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500 focus:outline-none" />
      </div>
      
      <div>
        <label class="block text-sm font-bold text-slate-700 mb-2">Deskripsi Detail *</label>
        <textarea id="input-desc" required rows="4" placeholder="Jelaskan detail kebutuhan..." 
          class="w-full p-3 border-2 border-slate-200 rounded-xl focus:border-red-500 focus:outline-none"></textarea>
      </div>
      
      <div class="flex gap-3 pt-4 border-t">
        <button type="button" id="btn-cancel" class="flex-1 py-3 border-2 border-slate-300 rounded-xl font-bold hover:bg-slate-50">
          Batal
        </button>
        <button type="submit" class="flex-1 py-3 gradient-red text-white rounded-xl font-bold shadow-lg">
          Kirim Request
        </button>
      </div>
    </form>
  </div>
</div>

<script>
// Firebase Init
const config = {
  apiKey: "AIzaSyD66JBknPCHDzJ4NcLq3ql7T867TJpTbSY",
  authDomain: "laritta-operations-system.firebaseapp.com",
  projectId: "laritta-operations-system",
  storageBucket: "laritta-operations-system.firebasestorage.app",
  messagingSenderId: "660263238018",
  appId: "1:660263238018:web:836be901d1451122867f9b"
};

firebase.initializeApp(config);
const db = firebase.firestore();
const appId = "laritta-ops-v3";

// 41 OUTLETS DATA
const OUTLETS = [
  {code:'SBY-001',name:'Barata',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-002',name:'Candi',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-003',name:'Cemengkalang',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-004',name:'Darmahusada',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-005',name:'Darmo Permai',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-006',name:'Deltasari',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-007',name:'Demak',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-008',name:'Diponegoro',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-009',name:'Dukuh Kupang',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-010',name:'Gayung Sari',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-011',name:'Gresik Kota Baru',hub:'Surabaya Raya',area:'Gresik'},
  {code:'SBY-012',name:'Iskandar Muda',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-013',name:'Kapas Krampung',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-014',name:'Kedung Cowek',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-015',name:'Ketintang',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-016',name:'Krian',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-017',name:'Kutai',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-018',name:'Manukan',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-019',name:'Menganti',hub:'Surabaya Raya',area:'Gresik'},
  {code:'SBY-020',name:'Mulyosari',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-021',name:'Nias',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-022',name:'Perak',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-023',name:'Rungkut',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-024',name:'Rungkut Tengah',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-025',name:'Sepanjang',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-026',name:'ST. Gubeng',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-027',name:'Sukodono',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-028',name:'Tanggulangin',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-029',name:'Tropodo',hub:'Surabaya Raya',area:'Sidoarjo'},
  {code:'SBY-030',name:'Wage',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-031',name:'Wiyung',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-032',name:'Bangkalan',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'SBY-033',name:'Panglima Sudirman',hub:'Surabaya Raya',area:'Surabaya'},
  {code:'TGR-001',name:'Borobudur',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-002',name:'Ciledug',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-003',name:'Halim',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-004',name:'Merdeka',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-005',name:'Periuk',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-006',name:'Poris',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-007',name:'Raden Saleh',hub:'Tangerang',area:'Tangerang'},
  {code:'TGR-008',name:'Graha Raya',hub:'Tangerang',area:'Tangerang'}
];

const DEPARTMENTS = ['IT','HRD','Finance Accounting','Procurement','Logistik','Sales Mobile'];

// Global state
let requests = [];
let viewMode = 'outlet';
let currentFilter = '';

// DOM Elements
const modal = document.getElementById('modal');
const btnCreate = document.getElementById('btn-create');
const btnCloseModal = document.getElementById('btn-close-modal');
const btnCancel = document.getElementById('btn-cancel');
const btnOutlet = document.getElementById('btn-outlet');
const btnMarketing = document.getElementById('btn-marketing');
const form = document.getElementById('form-request');
const container = document.getElementById('requests-container');
const statusText = document.getElementById('status-text');
const createBtnContainer = document.getElementById('create-btn-container');
const filterContainer = document.getElementById('filter-container');
const selectOutlet = document.getElementById('select-outlet');
const selectCategory = document.getElementById('select-category');
const selectHub = document.getElementById('select-hub');
const selectOutletForm = document.getElementById('select-outlet-form');
const outletGroup = document.getElementById('outlet-group');
const deptGroup = document.getElementById('dept-group');

// Populate Filter Dropdown
function populateFilterDropdown() {
  let html = '<option value="">Pilih Outlet/Dept Anda...</option>';
  html += '<optgroup label="ğŸ¢ DEPARTEMEN">';
  DEPARTMENTS.forEach(d => {
    html += `<option value="DEPT:${d}">${d}</option>`;
  });
  html += '</optgroup>';
  html += '<optgroup label="ğŸ“ HUB SURABAYA RAYA">';
  OUTLETS.filter(o => o.hub === 'Surabaya Raya').forEach(o => {
    html += `<option value="OUTLET:${o.code}">${o.code} - ${o.name}</option>`;
  });
  html += '</optgroup>';
  html += '<optgroup label="ğŸ“ HUB TANGERANG">';
  OUTLETS.filter(o => o.hub === 'Tangerang').forEach(o => {
    html += `<option value="OUTLET:${o.code}">${o.code} - ${o.name}</option>`;
  });
  html += '</optgroup>';
  selectOutlet.innerHTML = html;
}

// Populate Form Outlet Dropdown based on HUB
selectHub.addEventListener('change', () => {
  const hub = selectHub.value;
  if (!hub) {
    selectOutletForm.innerHTML = '<option value="">Pilih outlet...</option>';
    return;
  }
  let html = '<option value="">Pilih outlet...</option>';
  OUTLETS.filter(o => o.hub === hub).forEach(o => {
    html += `<option value="${o.code}">${o.code} - ${o.name}</option>`;
  });
  selectOutletForm.innerHTML = html;
});

// Category Change
selectCategory.addEventListener('change', () => {
  const cat = selectCategory.value;
  if (cat === 'outlet') {
    outletGroup.classList.remove('hidden');
    deptGroup.classList.add('hidden');
  } else if (cat === 'dept') {
    deptGroup.classList.remove('hidden');
    outletGroup.classList.add('hidden');
  } else {
    outletGroup.classList.add('hidden');
    deptGroup.classList.add('hidden');
  }
});

// Load Data
function loadData() {
  db.collection('artifacts').doc(appId).collection('public')
    .doc('data').collection('requests').orderBy('createdAt', 'desc')
    .onSnapshot((snap) => {
      requests = snap.docs.map(d => ({id: d.id, ...d.data()}));
      updateStats();
      renderRequests();
      statusText.textContent = 'âœ… Terhubung dengan Firebase - Total: ' + requests.length + ' request';
    }, (err) => {
      console.error(err);
      statusText.textContent = 'âŒ Error: ' + err.message;
    });
}

// Update Stats
function updateStats() {
  let filtered = requests;
  if (viewMode === 'outlet' && currentFilter) {
    filtered = requests.filter(r => {
      if (currentFilter.startsWith('OUTLET:')) {
        const code = currentFilter.replace('OUTLET:', '');
        return r.outletCode === code;
      } else if (currentFilter.startsWith('DEPT:')) {
        const dept = currentFilter.replace('DEPT:', '');
        return r.department === dept;
      }
      return true;
    });
  }
  
  document.getElementById('stat-total').textContent = filtered.length;
  document.getElementById('stat-antrian').textContent = filtered.filter(r => r.status === 'antrian').length;
  document.getElementById('stat-diproses').textContent = filtered.filter(r => r.status === 'diproses').length;
  document.getElementById('stat-selesai').textContent = filtered.filter(r => r.status === 'selesai').length;
}

// Render Requests
function renderRequests() {
  let filtered = requests;
  
  if (viewMode === 'outlet' && currentFilter) {
    filtered = requests.filter(r => {
      if (currentFilter.startsWith('OUTLET:')) {
        const code = currentFilter.replace('OUTLET:', '');
        return r.outletCode === code;
      } else if (currentFilter.startsWith('DEPT:')) {
        const dept = currentFilter.replace('DEPT:', '');
        return r.department === dept;
      }
      return true;
    });
  }
  
  if (filtered.length === 0) {
    container.innerHTML = `
      <div class="bg-white p-20 rounded-2xl text-center border-2 border-dashed">
        <div class="text-6xl mb-4">ğŸ“‹</div>
        <h3 class="text-xl font-bold mb-2">Belum ada permintaan</h3>
        <p class="text-slate-500">${viewMode === 'outlet' ? 'Klik "Buat Request Baru" untuk memulai' : 'Menunggu request dari outlet'}</p>
      </div>
    `;
    return;
  }

  const html = filtered.map(r => {
    let statusClass, statusText, statusBg;
    if (r.status === 'selesai') {
      statusClass = 'bg-green-100 text-green-700 border-green-300';
      statusText = 'âœ… Selesai';
      statusBg = 'bg-green-50';
    } else if (r.status === 'diproses') {
      statusClass = 'bg-blue-100 text-blue-700 border-blue-300';
      statusText = 'âš™ï¸ Diproses';
      statusBg = 'bg-blue-50';
    } else if (r.status === 'batal') {
      statusClass = 'bg-red-100 text-red-700 border-red-300';
      statusText = 'âŒ Batal';
      statusBg = 'bg-red-50';
    } else {
      statusClass = 'bg-yellow-100 text-yellow-700 border-yellow-300';
      statusText = 'â³ Antrian';
      statusBg = 'bg-yellow-50';
    }
    
    let buttons = '';
    if (viewMode === 'marketing') {
      if (r.status === 'antrian') {
        buttons = `
          <div class="grid grid-cols-2 gap-2 mt-3 pt-3 border-t">
            <button onclick="updateStatus('${r.id}','diproses')" class="bg-blue-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-blue-700">
              Proses
            </button>
            <button onclick="updateStatus('${r.id}','batal')" class="bg-red-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-red-700">
              Batalkan
            </button>
          </div>
        `;
      } else if (r.status === 'diproses') {
        buttons = `
          <div class="grid grid-cols-2 gap-2 mt-3 pt-3 border-t">
            <button onclick="updateStatus('${r.id}','selesai')" class="bg-green-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-green-700">
              âœ… Selesai
            </button>
            <button onclick="updateStatus('${r.id}','batal')" class="bg-red-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-red-700">
              Batalkan
            </button>
          </div>
        `;
      }
    }
    
    return `
      <div class="bg-white rounded-xl border-2 shadow-sm ${statusBg} border-l-4 ${statusClass.split(' ')[1].replace('text','border')}">
        <div class="p-5">
          <div class="flex justify-between items-start mb-3">
            <span class="text-xs font-bold px-3 py-1.5 rounded-full border-2 ${statusClass}">${statusText}</span>
            <span class="text-xs text-slate-500">${r.type || '-'}</span>
          </div>
          <h3 class="font-bold text-lg mb-2 text-slate-800">${r.title || '-'}</h3>
          <p class="text-sm text-slate-600 mb-3 line-clamp-2">${(r.description || '').substring(0,120)}...</p>
          <div class="text-xs space-y-1 text-slate-600">
            <div>ğŸ‘¤ <span class="font-medium">${r.requesterName || '-'}</span></div>
            <div>ğŸ“ <span class="font-medium">${r.branch || '-'}</span></div>
          </div>
          ${buttons}
        </div>
      </div>
    `;
  }).join('');
  
  container.innerHTML = '<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">' + html + '</div>';
}

// Update Status
function updateStatus(id, status) {
  if (!confirm(`Yakin ubah status menjadi "${status}"?`)) return;
  
  db.collection('artifacts').doc(appId).collection('public')
    .doc('data').collection('requests').doc(id)
    .update({
      status: status,
      updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => console.log('Status updated'))
    .catch(err => alert('Error: ' + err.message));
}

// Form Submit
form.addEventListener('submit', (e) => {
  e.preventDefault();
  
  const category = selectCategory.value;
  let branch = '';
  let outletCode = '';
  let department = '';
  
  if (category === 'outlet') {
    const code = selectOutletForm.value;
    if (!code) {
      alert('Pilih outlet terlebih dahulu!');
      return;
    }
    const outlet = OUTLETS.find(o => o.code === code);
    branch = `${outlet.code} - ${outlet.name} (${outlet.area})`;
    outletCode = outlet.code;
  } else if (category === 'dept') {
    department = document.getElementById('select-dept').value;
    if (!department) {
      alert('Pilih departemen terlebih dahulu!');
      return;
    }
    branch = department;
  } else {
    alert('Pilih kategori pemohon!');
    return;
  }
  
  const data = {
    title: document.getElementById('input-title').value,
    description: document.getElementById('input-desc').value,
    requesterName: document.getElementById('input-name').value,
    requesterCategory: category,
    branch: branch,
    outletCode: outletCode || '',
    department: department || '',
    type: document.getElementById('select-type').value,
    status: 'antrian',
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  };
  
  db.collection('artifacts').doc(appId).collection('public')
    .doc('data').collection('requests').add(data)
    .then(() => {
      alert('âœ… Request berhasil dibuat!');
      modal.classList.add('hidden');
      form.reset();
      selectCategory.value = '';
      outletGroup.classList.add('hidden');
      deptGroup.classList.add('hidden');
    })
    .catch(err => alert('âŒ Gagal: ' + err.message));
});

// Mode Toggle
btnOutlet.addEventListener('click', () => {
  viewMode = 'outlet';
  btnOutlet.classList.add('bg-red-600', 'text-white', 'shadow-lg');
  btnOutlet.classList.remove('bg-slate-100', 'text-slate-600', 'border-2');
  btnMarketing.classList.add('bg-slate-100', 'text-slate-600', 'border-2');
  btnMarketing.classList.remove('bg-red-600', 'text-white', 'shadow-lg');
  createBtnContainer.classList.remove('hidden');
  filterContainer.classList.remove('hidden');
  renderRequests();
  updateStats();
});

btnMarketing.addEventListener('click', () => {
  viewMode = 'marketing';
  currentFilter = '';
  selectOutlet.value = '';
  btnMarketing.classList.add('bg-red-600', 'text-white', 'shadow-lg');
  btnMarketing.classList.remove('bg-slate-100', 'text-slate-600', 'border-2');
  btnOutlet.classList.add('bg-slate-100', 'text-slate-600', 'border-2');
  btnOutlet.classList.remove('bg-red-600', 'text-white', 'shadow-lg');
  createBtnContainer.classList.add('hidden');
  filterContainer.classList.add('hidden');
  renderRequests();
  updateStats();
});

// Filter Change
selectOutlet.addEventListener('change', () => {
  currentFilter = selectOutlet.value;
  renderRequests();
  updateStats();
});

// Modal
btnCreate.addEventListener('click', () => modal.classList.remove('hidden'));
btnCloseModal.addEventListener('click', () => modal.classList.add('hidden'));
btnCancel.addEventListener('click', () => modal.classList.add('hidden'));

// Init
populateFilterDropdown();
loadData();
</script>

</body>
</html>
